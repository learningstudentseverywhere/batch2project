sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox"],function(e,t){"use strict";return e.extend("com.practice.batch2ui.controller.Home",{onInit:function(){},GetStudentFeesData:function(){let e="";let t=this;let o=this.getView().byId("inputValue1").getValue();let n="/odata/v4/school/StudentFees";let a=`?$filter=student_id eq '${o}'`;$.ajax({url:n+a,dataType:"json",success:function(o){e=o.value[0].fees_paid;t.getView().byId("inputValue2").setValue(e)},error:function(e){}})},CreateStudent:function(){let e=this.getView().getModel("localStudentModel");let t=e.getProperty("/studentId");let o=e.getProperty("/studentName");let n=e.getProperty("/parentName");let a="/odata/v4/school/Students";let s={student_id:t,student_name:o,parent_id:n};$.ajax({url:a,contentType:"application/json",type:"POST",data:JSON.stringify(s),dataType:"json",success:function(e){console.log("Success")},error:function(e){console.log("Error")}});console.log("End")},updateStudent:function(){let e=this.getView().getModel("localStudentModel");let t=e.getProperty("/updateStudentId");let o=e.getProperty("/updateStudentName");let n=`/odata/v4/school/Students(student_id='${t}')`;let a={student_name:o};$.ajax({url:n,contentType:"application/json",type:"PATCH",data:JSON.stringify(a),dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}})},DeleteStudent:function(){let e=this.getView().getModel("localStudentModel");let t=e.getProperty("/deleteStudentId");let o=`/odata/v4/school/Students(student_id='${t}')`;$.ajax({url:o,contentType:"application/json",type:"DELETE",dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}})},AllStudentData:async function(){let e="/odata/v4/school/Students";let t=this.getView().getModel("localStudentModel");let o=await this.fetchData();t.setProperty("/allStudentData",o.value)},fetchData:async function(){return new Promise((e,t)=>{let o="/odata/v4/school/Students";$.ajax({url:o,dataType:"json",success:function(t){e(t)},error:function(e){console.log(e)}})})},schedulejobbackup:async function(){var e=JSON.stringify(new Date);let o=await this.getJobId();var n=$.sap.getModulePath("com.practice.batch2ui")+"/scheduler/jobs/"+o+"/schedules";var a={data:{},description:"Job scheduled by "+"Sakthivel S"+" on "+e,active:true,type:"one-time",time:"now"};$.ajax({url:n,type:"POST",data:JSON.stringify(a),contentType:"application/json",headers:{Authorization:"Basic c2Jzc19xbmUwaHNwN2NlbHB3NGloaGt4bmszc3o2b3o3ZGRnaXQvaGg4aGUyenNpazdmZDRvamkvaGZxdHF0Zmt3OGV0bjdjPTphYV8rWkFUVUk2UDN6Mk5vU0VHV01DeFFROXl3Q0U9"},success:function(e){sap.ui.core.BusyIndicator.hide();t.success("Job Schedule id: "+e.scheduleId+" was created successfully")},error:function(e){sap.ui.core.BusyIndicator.hide();t.error("error: "+e)}})},getJobId:async function(){return new Promise((e,o)=>{var n=$.sap.getModulePath("com.practice.batch2ui")+"/scheduler/jobs?name=Student Backup Job";$.ajax({url:n,type:"GET",contentType:"application/json",success:function(t){e(t)},error:function(e){sap.ui.core.BusyIndicator.hide();t.error("error: "+e)}})})}})});
//# sourceMappingURL=Home.controller.js.map